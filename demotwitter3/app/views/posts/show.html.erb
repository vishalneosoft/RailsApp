<% if current_user %>
<div class="col-sm-3">
    <div class = "panel panel-info">
        <div class = "panel-heading">
        <% if @user.id == current_user.id %>
        <h4>Your Twitter Profile</h4>
        <% else %>
        <h4><%= @user.name.capitalize %> Twitter Profile</h4>
        <% end %>
        </div>
        <div class = "panel-body">
        <br>
        <% if current_user.avatar.url.present? %>
        <%= image_tag(@user.avatar.url(:thumb), class: 'img-rounded') %>
        <% else %>
        <%= image_tag('default.png',size: '100x100',class: 'img-rounded') %>
        <% end %>
        <h4><span class="name"><%= @user.name.capitalize %></span> @<%= @user.username %></h4>
        <br>
        <table class = "table table-bordered">
            <tr>
                <td><%= link_to 'Tweets' ,post_path(@user) %></td>
                <td><%= link_to 'Followers',followers_user_path(@user) %></td>
                <td><%= link_to 'Following',following_user_path(@user) %></td>
            </tr>
            <tr class = "success">
                <td><%= @user.posts.size %></td>
                <td><%= @user.followers.count%></td>
                <td><%= @user.following.count%></td>
            </tr>
        </table>
        <%= render :partial => '/components/follow_button' %>
    </div>
    </div>
</div>
<div class="col-sm-7">
<% if @user.id == current_user.id %>
<div class= "panel panel-info">
    <div class = "panel-heading">
    <h3>Post a Tweet</h3>
    </div>
    <br>
    <div class = "panel-body">
    <%= form_for @post do |f| %>
        <%= f.text_area :content, size: "80x5",style: 'border-radius: 10px;' %>
        <br><br>
        <%= f.submit "Tweet", class: 'btn btn-primary' %>
        <%= f.submit "Upload Image", class: 'btn btn-default' %>
    <% end %>
    </div>
</div>
<% end %>
<div class= "panel panel-info">
    <div class = "panel-heading">
    <% if @user.id == current_user.id %>
    <h3>Your Tweet</h3>
    <% else %>
    <h3><%= @user.name.capitalize %> Tweet</h3>
    <% end %>
    </div>
    <div class = "panel-body">
    <% @user.posts.each do |post| %>
        <div id="show-post">
        <span class="name"><%= @user.name.capitalize %></span> 
        @<%= @user.username %> 
        <span class="time"><%= time_ago_in_words(post.created_at) %></span>
        <br>
        <h4><%= post.content %></h4>
        <% if post.retweet_id.present? %>
            <% @retweet = Post.find(post.retweet_id) %>
            <br>
            <div class="panel panel-default">
                <div class="panel-body">
                <span class="name"><%= link_to @retweet.user.name.capitalize, user_path(@retweet.user) %></span> 
                @<%= @retweet.user.username %> 
                <span class="time"><%= time_ago_in_words(@retweet.created_at) %></span>
                <br>
                <h4>&nbsp<%= @retweet.content %></h4>
                </div>
            </div>
        <% end %>
        <% if post.retweets.present? %>
        &nbsp<%= post.retweets.count %>
        <% end %>
        <%= link_to 'retweet', new_retweet_path(id: post),class: "glyphicon glyphicon-retweet" %>&nbsp 
        <% if post.comments.present? %>
        <%= link_to post.comments.count, post_comments_path(post) %><% end %> <%= link_to 'comment', new_post_comment_path(post),class: "glyphicon glyphicon-comment" %>&nbsp 
         <% if post.user_id == current_user.id %>   
        <%= link_to 'delete', post_path(post), :method => :delete, data: {confirm: "Are you sure?"},remote: true,class: "glyphicon glyphicon-trash"  %>
         <% end %>
        </p>
        <hr>
        </div>
    <% end %>
</div>
</div>
<% end %>


